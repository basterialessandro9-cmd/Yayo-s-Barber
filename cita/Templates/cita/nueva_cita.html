{% load static %}
{% include "inc/header.html" %}

<div class="container mt-5">
    <div class="card shadow p-4">
        <h2 class="mb-4 text-center">Agenda tu Cita</h2>

        {% if messages %}
            {% for message in messages %}
                <div class="alert alert-success">{{ message }}</div>
            {% endfor %}
        {% endif %}

        {% if error %}
            <div class="alert alert-danger">{{ error }}</div>
        {% endif %}

        <form action="" method="post">
            {% csrf_token %}

            <!-- 📅 Fecha y hora -->
            <div class="mb-3">
                <label for="fecha_hora" class="form-label">Fecha y Hora:</label>
                <input type="datetime-local" name="fecha_hora" id="fecha_hora" class="form-control" required value="{{ form_data.fecha_hora|default:'' }}">
                {% if errores.fecha_hora %}
                    <div class="text-danger mt-1">{{ errores.fecha_hora }}</div>
                {% endif %}
            </div>

            <!-- ✂️ Servicio -->
            <div class="mb-3">
                <label for="servicio" class="form-label">Servicio:</label>
                <select name="servicio" id="servicio" class="form-select" required>
                    <option value="" disabled selected>Selecciona un servicio</option>
                    {% for servicio in servicios %}
                        <option value="{{ servicio.id }}"
                            {% if form_data.servicio_id == servicio.id|stringformat:"s" %}selected{% endif %}>
                            {{ servicio.nombre }}
                        </option>
                    {% endfor %}
                </select>
                {% if errores.servicio %}
                    <div class="text-danger mt-1">{{ errores.servicio }}</div>
                {% endif %}
            </div>

            <!-- 🔒 Estado (oculto por defecto) -->
            <input type="hidden" name="estado"
